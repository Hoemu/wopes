<mxfile host="Electron" agent="Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) draw.io/24.7.5 Chrome/126.0.6478.183 Electron/31.3.0 Safari/537.36" version="24.7.5" pages="3">
  <diagram name="第 1 页" id="MRzUti_MZBK8tDDPC_a-">
    <mxGraphModel dx="698" dy="470" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="6eVGvYixSCLnwYIir9Xo-1" value="DataParam" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="490" y="70" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="6eVGvYixSCLnwYIir9Xo-11" value="" style="rounded=0;orthogonalLoop=1;jettySize=auto;html=1;startArrow=diamondThin;startFill=1;endArrow=open;endFill=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.537;entryY=0.983;entryDx=0;entryDy=0;entryPerimeter=0;exitPerimeter=0;" parent="1" source="6eVGvYixSCLnwYIir9Xo-2" target="6eVGvYixSCLnwYIir9Xo-5" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="aTKgbTDTGllvzi76LgTs-6" style="rounded=0;orthogonalLoop=1;jettySize=auto;html=1;startArrow=diamondThin;startFill=1;endArrow=open;endFill=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;" parent="1" source="6eVGvYixSCLnwYIir9Xo-2" target="aTKgbTDTGllvzi76LgTs-1" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="aTKgbTDTGllvzi76LgTs-9" style="rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=1;entryDx=0;entryDy=0;startArrow=diamondThin;startFill=1;endArrow=open;endFill=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;" parent="1" source="6eVGvYixSCLnwYIir9Xo-2" target="6eVGvYixSCLnwYIir9Xo-1" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="6eVGvYixSCLnwYIir9Xo-2" value="LogController" style="whiteSpace=wrap;html=1;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="294" y="210" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="6eVGvYixSCLnwYIir9Xo-5" value="LogFile" style="whiteSpace=wrap;html=1;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="110" y="70" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="6eVGvYixSCLnwYIir9Xo-9" style="rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=1;entryDx=0;entryDy=0;startArrow=diamondThin;startFill=1;endArrow=open;endFill=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;" parent="1" source="6eVGvYixSCLnwYIir9Xo-8" target="6eVGvYixSCLnwYIir9Xo-2" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="6eVGvYixSCLnwYIir9Xo-8" value="LogSystem" style="whiteSpace=wrap;html=1;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="294" y="320" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="aTKgbTDTGllvzi76LgTs-8" style="rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;startArrow=diamondThin;startFill=1;endArrow=open;endFill=0;" parent="1" source="aTKgbTDTGllvzi76LgTs-1" target="6eVGvYixSCLnwYIir9Xo-1" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="aTKgbTDTGllvzi76LgTs-1" value="LogStream（功能上需要和 DataParam 相似）" style="whiteSpace=wrap;html=1;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="294" y="70" width="120" height="60" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="3RH6tqF6E1k8193if0K2" name="环形缓冲区设计">
    <mxGraphModel dx="698" dy="470" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="76J15khV-z4wYs4scHZp-1" value="内存块类" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="300" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="76J15khV-z4wYs4scHZp-3" style="rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=1;entryDx=0;entryDy=0;startArrow=diamondThin;startFill=1;endArrow=open;endFill=0;" edge="1" parent="1" source="76J15khV-z4wYs4scHZp-2" target="76J15khV-z4wYs4scHZp-1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="76J15khV-z4wYs4scHZp-2" value="内存管理类" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="300" y="140" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="76J15khV-z4wYs4scHZp-4" value="&lt;h1 style=&quot;margin-top: 0px;&quot;&gt;内存块设计说明&lt;/h1&gt;&lt;p&gt;1. 字符添加接口（返回一个整形）&lt;/p&gt;&lt;p&gt;2. 字符串读取接口（返回整个字符串，如果字符串未填满，需要返回一个正确的值）&lt;/p&gt;" style="text;html=1;whiteSpace=wrap;overflow=hidden;rounded=0;" vertex="1" parent="1">
          <mxGeometry width="250" height="110" as="geometry" />
        </mxCell>
        <mxCell id="76J15khV-z4wYs4scHZp-7" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="76J15khV-z4wYs4scHZp-5" target="76J15khV-z4wYs4scHZp-6">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="76J15khV-z4wYs4scHZp-5" value="字符串添加" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="40" y="380" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="76J15khV-z4wYs4scHZp-11" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="76J15khV-z4wYs4scHZp-6" target="76J15khV-z4wYs4scHZp-10">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="76J15khV-z4wYs4scHZp-6" value="开始&lt;br&gt;（输入一个字符串：inputString）" style="whiteSpace=wrap;html=1;rounded=1;" vertex="1" parent="1">
          <mxGeometry x="40" y="490" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="76J15khV-z4wYs4scHZp-13" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="76J15khV-z4wYs4scHZp-10" target="76J15khV-z4wYs4scHZp-12">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="76J15khV-z4wYs4scHZp-14" value="是" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="76J15khV-z4wYs4scHZp-13">
          <mxGeometry x="-0.1443" y="-2" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="76J15khV-z4wYs4scHZp-20" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="76J15khV-z4wYs4scHZp-10" target="76J15khV-z4wYs4scHZp-19">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="76J15khV-z4wYs4scHZp-21" value="否" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="76J15khV-z4wYs4scHZp-20">
          <mxGeometry x="-0.2074" y="-1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="76J15khV-z4wYs4scHZp-10" value="字符串是否大于当前内存块" style="rhombus;whiteSpace=wrap;html=1;rounded=1;" vertex="1" parent="1">
          <mxGeometry x="55" y="590" width="90" height="90" as="geometry" />
        </mxCell>
        <mxCell id="76J15khV-z4wYs4scHZp-16" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="76J15khV-z4wYs4scHZp-12" target="76J15khV-z4wYs4scHZp-15">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="76J15khV-z4wYs4scHZp-12" value="把所有内存添加到内存块中" style="whiteSpace=wrap;html=1;rounded=1;" vertex="1" parent="1">
          <mxGeometry x="220" y="605" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="76J15khV-z4wYs4scHZp-18" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="76J15khV-z4wYs4scHZp-15" target="76J15khV-z4wYs4scHZp-17">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="76J15khV-z4wYs4scHZp-15" value="返回 inputString 最后读取到的位置" style="whiteSpace=wrap;html=1;rounded=1;" vertex="1" parent="1">
          <mxGeometry x="220" y="730" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="76J15khV-z4wYs4scHZp-17" value="结束" style="whiteSpace=wrap;html=1;rounded=1;" vertex="1" parent="1">
          <mxGeometry x="220" y="950" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="76J15khV-z4wYs4scHZp-23" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="76J15khV-z4wYs4scHZp-19" target="76J15khV-z4wYs4scHZp-22">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="76J15khV-z4wYs4scHZp-19" value="把所有 inputString 都添加到内存块中" style="whiteSpace=wrap;html=1;rounded=1;" vertex="1" parent="1">
          <mxGeometry x="40" y="730" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="76J15khV-z4wYs4scHZp-26" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="76J15khV-z4wYs4scHZp-22" target="76J15khV-z4wYs4scHZp-25">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="76J15khV-z4wYs4scHZp-22" value="返回 -1" style="whiteSpace=wrap;html=1;rounded=1;" vertex="1" parent="1">
          <mxGeometry x="40" y="840" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="76J15khV-z4wYs4scHZp-25" value="结束" style="whiteSpace=wrap;html=1;rounded=1;" vertex="1" parent="1">
          <mxGeometry x="40" y="950" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="76J15khV-z4wYs4scHZp-28" value="&lt;h1 style=&quot;margin-top: 0px;&quot;&gt;push(const char*var) 功能说明&lt;/h1&gt;&lt;div&gt;push 函数为添加字符串的函数&lt;/div&gt;" style="text;html=1;whiteSpace=wrap;overflow=hidden;rounded=0;" vertex="1" parent="1">
          <mxGeometry y="280" width="390" height="90" as="geometry" />
        </mxCell>
        <mxCell id="76J15khV-z4wYs4scHZp-29" value="&lt;h1 style=&quot;margin-top: 0px;&quot;&gt;&lt;font style=&quot;font-size: 12px;&quot;&gt;流程图说明&lt;/font&gt;&lt;/h1&gt;&lt;div&gt;&lt;span style=&quot;font-size: 10px;&quot;&gt;1. 首先输入一个字符串，命名为 var（const char *var ）&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 10px;&quot;&gt;2. 计算剩余内存：&lt;/span&gt;&lt;span style=&quot;background-color: initial; font-size: 10px;&quot;&gt;remainningMemory = memeorysize - 1 - readPtr；&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: initial; font-size: 10px;&quot;&gt;3. 计算字符串长度：varLen = end - begin;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: initial; font-size: 10px;&quot;&gt;4. 声明变量：varRecorder = -1;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: initial; font-size: 10px;&quot;&gt;5.&amp;nbsp; if( varLen &amp;lt; remainningMemory) {&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: initial; font-size: 10px;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;把字符串拷贝到当前内存中&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: initial; font-size: 10px;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;并且把 var 已经拷贝的字符处理掉（或者不处理）&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: initial; font-size: 10px;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;当前内存：memoryChunk；&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: initial; font-size: 10px;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;&lt;/span&gt;&lt;span style=&quot;background-color: initial; font-size: 10px;&quot;&gt;readPtr =&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;background-color: initial; font-size: 10px;&quot;&gt;readPtr + varLen;&lt;/span&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: initial; font-size: 10px;&quot;&gt;6. else // 说明此时 var 的内存已经比剩余内存大了&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: initial; font-size: 10px;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;把 var 装满剩余内存（memcpy(memoryChunk+readPtr, var + begin,&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;font-size: 10px;&quot;&gt;remainningMemroy&lt;/span&gt;&lt;span style=&quot;background-color: initial; font-size: 10px;&quot;&gt;);&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: initial; font-size: 10px;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;把 var 读取的位置记录下来（ varRrecorder = begin + remainningMemroy）&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 10px;&quot;&gt;返回 varRecorder（如果内存未读满，返回 -1）&lt;/span&gt;&lt;/div&gt;" style="text;html=1;whiteSpace=wrap;overflow=hidden;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="430" y="350" width="370" height="390" as="geometry" />
        </mxCell>
        <mxCell id="76J15khV-z4wYs4scHZp-59" value="" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="190" y="370" width="220" height="220" as="geometry" />
        </mxCell>
        <mxCell id="76J15khV-z4wYs4scHZp-58" value="&lt;pre style=&quot;margin-top: 0px;&quot;&gt;&lt;span style=&quot;font-size: 12px;&quot;&gt;&lt;font face=&quot;Helvetica&quot;&gt;ClassnName：CharChunk&lt;/font&gt;&lt;/span&gt;&lt;/pre&gt;&lt;h5 style=&quot;margin-top: 0px;&quot;&gt;&lt;span style=&quot;font-weight: normal;&quot;&gt;&lt;span style=&quot;font-size: 12px;&quot;&gt;&lt;font style=&quot;&quot; face=&quot;Helvetica&quot;&gt;+ &lt;/font&gt;&lt;/span&gt;&lt;font style=&quot;&quot; face=&quot;Helvetica&quot;&gt;char *memoryChunk;&lt;br&gt;&lt;/font&gt;&lt;/span&gt;&lt;span style=&quot;font-weight: normal;&quot;&gt;+ int memorySize;&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;font-weight: normal;&quot;&gt;+ int&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;font-size: 10px; background-color: initial;&quot;&gt;&lt;span style=&quot;font-weight: normal;&quot;&gt;remainningMemory;&lt;/span&gt;&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;font-weight: normal;&quot;&gt;+&amp;nbsp;int readPtr;&lt;/span&gt;&lt;/h5&gt;&lt;h5&gt;&lt;span style=&quot;font-weight: normal;&quot;&gt;+&amp;nbsp;inline int&amp;nbsp;&lt;span style=&quot;background-color: initial;&quot;&gt;copyMemory&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;(const char *var,&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;const int &amp;amp;begin,&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;const int &amp;amp;end);&lt;/span&gt;&lt;/span&gt;&lt;/h5&gt;" style="text;html=1;whiteSpace=wrap;overflow=hidden;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="205" y="378.75" width="190" height="202.5" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="hBRLGVwIeeC6-FCN-NOJ" name="ER图">
    <mxGraphModel dx="698" dy="470" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="dFDvZY5GZ8dAeYCAhveD-2" value="内存使用情况" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="270" y="340" width="120" height="60" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
